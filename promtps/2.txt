### ROLE

You are a **senior full-stack engineer and systems architect** working on the **Next Subscription Admin Panel** (Next.js + TypeScript + Shadcn/UI + Motion + Recharts).
Your primary goal is to **integrate real backend system logs with the frontend**, using the **Shadcn Terminal component** for visualization, while making the **maintenance controls functional and production-grade**.

---

### OBJECTIVE

You will enhance the **System Monitoring module** of Next Subscription‚Äôs admin dashboard by:

1. Implementing **real-time, persistent system logs** displayed in a terminal-style component.
2. Expanding the **maintenance control system** to perform actual backend operations.
3. Improving the **External Services** chart to use real connection data instead of static or dummy values.
4. Ensuring **data persistence**, **clean UX**, and **secure backend handling**.

---

### CONTEXT

* The frontend is built with **Next.js + TypeScript + Tailwind + Shadcn/UI**.
* The backend is **Node.js + Express + MongoDB**.
* System Monitoring route: `/admin/system-monitoring`
* API endpoints:

  * `/api/health` ‚Üí system stats
  * `/api/system/logs` ‚Üí fetch logs
  * `/api/system/maintenance/*` ‚Üí cleanup actions

---

### TASK INSTRUCTIONS

#### üß≠ 1. Understand & Analyze Existing Code

* Carefully scan the backend folders:

  ```
  /backend/routes/system.js
  /backend/controllers/systemController.js
  /backend/services/logger.js
  /backend/utils/
  ```
* Identify where logs are generated and stored.
* Locate the `/api/system/logs` and `/api/health` routes.
* Analyze the logging mechanism ‚Äî ensure that logs include timestamp, type, message, and metadata (e.g., system events, API errors).

---

#### üß± 2. System Logs ‚Äì Real Integration with Shadcn Terminal

Use the **Terminal component** from `shadcn.io/components/visualization/terminal` to visually display live backend logs.

**UI Behavior:**

* Terminal styled like macOS (traffic light buttons, blurred background).
* Auto-scrolls as new logs appear.
* Animated typing effect for each new log using **Motion animations**.
* Supports both light/dark themes dynamically.

**Functional Rules:**

* Pull logs from `/api/system/logs` (real data only).
* Logs should stream or refresh every 5 seconds.
* Log example:

  ```json
  {
    "timestamp": "2025-11-13T16:22:01Z",
    "level": "INFO",
    "message": "Database connection stable"
  }
  ```
* Allow toggling between:

  * **Live Logs** ‚Äì auto-refreshing logs.
  * **Archived Logs** ‚Äì day-wise logs saved on backend (e.g., `/api/system/logs/2025-11-12`).

**Action Buttons:**

* ‚ÄúClear Logs‚Äù ‚Üí Clears frontend view, but not deletes data from backend.
* ‚ÄúView Old Logs‚Äù ‚Üí Opens date selector modal and fetches saved logs.

---

#### üß© 3. Maintenance Control ‚Äì Real Functional System Cleanup

Analyze and make the following routes real and effective:

```
/api/system/maintenance/cache
/api/system/maintenance/users
/api/system/maintenance/all
```

**Expected Behavior:**

* `cache` ‚Üí Clears temporary server cache, resets in-memory objects.
* `users` ‚Üí Allows deleting or anonymizing user data safely.
* `all` ‚Üí Triggers global cleanup (requires confirmation modal).
* Use Shadcn `Dialog` for confirmation before action.
* Each operation must:

  * Log the action (who triggered, what was done).
  * Update system logs with a success or failure message.

---

#### üåê 4. External Services Status ‚Äì Real-Time Validation

Current chart shows static values (20%, 20%, etc.).
Replace with **real connection checks**:

| Service         | Check Method                 | Status    |
| --------------- | ---------------------------- | --------- |
| Cloud Storage   | Verify upload & access token | `UP/DOWN` |
| CDN             | Test request to CDN endpoint | `UP/DOWN` |
| Payment Gateway | Send auth ping               | `UP/DOWN` |
| Email Service   | Already connected (UP)       |           |

**Frontend behavior:**

* Pie Chart dynamically updates based on real data.
* Display percentage based on number of services actually online.
* Show textual summary below chart (e.g., ‚Äú3 of 4 services online‚Äù).

---

#### üíæ 5. Persistent Daily System Logs

Implement backend logic to:

* Save system logs daily in `/logs/YYYY-MM-DD.log` or database collection `system_logs_{date}`.
* Frontend adds **tab navigation**:

  ```
  [ Live Logs ] [ Archived Logs ]
  ```
* When ‚ÄúArchived Logs‚Äù is opened:

  * Display a dropdown of available dates.
  * Load logs for selected date.
  * Render them in the same terminal UI.

---

#### üß† 6. Make a To-Do List (Before Code Changes)

Tell the AI to generate a **To-Do checklist** before making any change:

1. Identify all backend files related to system monitoring, maintenance, and logs.
2. Check existing Mongo collections used for logs.
3. Verify `/api/system/logs` endpoint response.
4. Plan terminal integration (frontend component path).
5. Plan maintenance control actions and endpoints.
6. Plan external service validation logic.
7. Prepare for UI updates (charts, tabs, buttons, modals).

After that, it should execute the To-Do sequentially ‚Äî verifying each task before coding.

---

#### ‚öôÔ∏è 7. Rules

* Do **not** use any dummy data.
* Use **real-time backend connections**.
* Maintain data consistency between backend and frontend.
* Add clear, meaningful comments throughout code:

  ```js
  // LOGS: Fetching system logs for live terminal display
  ```
* Follow best practices for production-ready MERN stack.

---

#### ‚úÖ Expected Outcome

After execution:

* **Terminal UI** displays real backend logs (live + archived).
* **Maintenance controls** actually perform backend cleanup.
* **External service chart** reflects true connectivity.
* **System logs** persist daily and are accessible day-wise.
* Everything styled consistently with **Shadcn/UI and Motion animations**.
* **No dummy or placeholder data** ‚Äî everything live and real.

---
